<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.2/os/dtd1.2/technicalContent/dtd/topic.dtd">
<topic xml:lang="en" id="TroubleshootLicensing">

    <title>Troubleshooting: Licensing</title>

    <prolog>
        <author>ERT</author>
        <metadata>
            <audience type="administrator" job="troubleshooting" />
        </metadata>
    </prolog>

    <body>
        <section id="TrialMsgAfterActivate">
            <title>Trial message still appears after activating license.</title>

            <symptom>
                <p>Even after a license has been activated, the trial version message still appears.</p>
                <systemoutput>You are using an unlicensed and unsupported version of .... Please contact your Systems Administrator for information on how to obtain a valid license.</systemoutput>
                <systemoutput>You are using a trial version of Evoq .... You currently have 365 days remaining before your trial period expires.</systemoutput>
            </symptom>

            <steps-unordered>
                <step>
                    <cmd>License not activated correctly.</cmd>
                    <info>
                        <p>See <xref format="dita" href="ActivateProdLic.dita">Activate Production License</xref> or <xref format="dita" href="ActivateDevLic.dita">Activate Development License</xref> for instructions to activate a license correctly.</p>
                        <p>If the server does not have Internet access while the license is being activated on it, </p>
                        <draft-comment>
                            <!-- <p>See also: License Activation FAQs</p> -->
                        </draft-comment>
                    </info>
                </step>

                <step>
                    <cmd>Site moved from one server to another.</cmd>
                    <info>
                        <p>Verify that the license is activated at both the server level and the IIS level. Follow the The License FAQ contains more details on this and a guide to activating a license correctly.</p>
                    </info>
                </step>

                <step>
                    <cmd>Cached pages.</cmd>
                    <info>
                        <p>While logged in as a <term>Host</term>, go to <menucascade><uicontrol>Tools</uicontrol> <uicontrol>Clear Cache</uicontrol></menucascade>.</p>
                    </info>
                </step>

                <step>
                    <cmd>Incorrect or missing settings in web.config.</cmd>
                    <info>
                        <p>The license module requires certain web.config settings. This commonly shows up as an error in your event viewer indicating that the <apiname>DotNetNuke.Professional.Application.ProApplication.CheckLicense()</apiname> "String reference not set to an instance of a String." error.</p>
                        <p>Verify that you have the following nodes in your <filepath>web.config</filepath> in the <menucascade><uicontrol>Configuration</uicontrol> <uicontrol>AppSetting</uicontrol></menucascade> tree:
                            <ul>
                                <li>InstallationDate:
                                    <codeblock>
                        &lt;add key=&quot;InstallationDate&quot; value=&quot;9/2/2009&quot; /&gt;
                                    </codeblock>
                                </li>
                                <li>Two licensing nodes:
                                    <codeblock>
                        &lt;add name=&quot;Licensing&quot; type=&quot;DotNetNuke.Professional.HttpModules.LicenseValidatorModule, DotNetNuke.Professional&quot; preCondition=&quot;managedHandler&quot; /&gt;
                        &lt;add name=&quot;Licensing&quot; type=&quot;DotNetNuke.Professional.HttpModules.LicenseValidatorModule, DotNetNuke.Professional&quot; /&gt;
                                    </codeblock>
                                </li>
                            </ul>
                        </p>
                    </info>
                </step>

                <step>
                    <cmd>Invalid license type.</cmd>
                    <info>
                        <p>An invoice for one Evoq product cannot be used to license a different Evoq product. Example: An Evoq Content invoice is invalid for Evoq Engage. Verify that the correct invoice number and email are used.</p>
                    </info>
                </step>

                <step>
                    <cmd>Application Pool Identity account with invalid or read-only profile.</cmd>
                    <info>
                        <p>With Microsoft .NET Framework 4, if running the application pool under a custom domain account, verify that the domain user has a valid profile.</p>
                        <p>Also verify that the profile is not read-only; otherwise, the license key is not decrypted and the trial version message is displayed.</p>
                    </info>
                </step>
            </steps-unordered>

        </section>
    </body>

    <related-links>
        <link href="http://customers.dnnsoftware.com/KB/c48/licensing.aspx"><linktext>DNN KB: Licensing</linktext></link>
    </related-links>

</topic>
